{//; unterdr√ºckt Fehler vom Lookup-System}
{suppresslookup}

{//; Rolle Terranova}
{set;~roleID;536240467562725389}
{//; Rolle RR9}
{set;~rr9;554931074140995585}

{//; Setzen der Farbe f√ºr Embed}
{set;~eColor;[]}
{set;~roles;{roles;{userid}}}
{foreach;~color;{get;~roles};
  {if;{rolecolor;{get;~color}};!=;000000;
    {push;{get;~eColor};{rolecolor;{get;~color}}}}}
{if;{length;{get;~eColor}};==;0;
  {set;~eColor;c1694f}}

{//; Zeigt die Regeln}
{if;{args};includes;rules;
{embed;{buildembed;color:{get;~eColor;0}
;title:__***Terranova Event Regeln:***__
;description:
__***Hinweise:***__
  
- Teilnehmen d√ºrfen nur <RR9!
- Jeder darf nur seine eigenen Punkte eintragen
- Jede Punktevergabe wird im Log dokumentiert
- Absichtlich falsche Punktevergabe f√ºhrt zur Disqualifizierung
  
__***Punktevergabe:***__
  
- RR geflogen: 3 Punkte
- Balken Blau: +5 Punkte
- Alle die in der RR Stufe noch Einfluss erhalten k√∂nnen, haben Einfluss erreicht: +10 Punkte
- Pro SS welches √ºberlebt: +1 Punkt
(Maximum also 21 Punkte, gilt ab RR mit 3 Teilnehmern)

Bei RR kleinerer Stufen geholfen (Nur bei Balken blau): 
(Punkte von oben gelten dann __***NICHT***__ zus√§tzlich!)
- 1 Stufe kleiner 10 Punkte
- 2 Stufen kleiner 12 Punkte
- 3 Stufen kleiner 15 Punkte

__***Gewinn in Stufe 9 Artis:***__

-    :first_place:= 20
-    :second_place: = 15
-    :third_place: = 10
  
-    :four: = 5
-    :five: = 2

}}{return}}

{//; Check ob User schon Punkte hat}
{if;{get;_Wert{userid}};<;0;{set;_Wert{userid};0}{commit}}

{//; Kein Argument -> gibt nur Punkte aus}
{if;{argslength};<=;0;{embed;{buildembed;
  color:{get;~eColor;0};
  title:Punktezahl {usernick};
  description:{get;_Wert{userid}}{rollback}}}{return}}

{//; Zeigt eine aktuelle Punkte√ºbersicht}
{set;~array;[]}
{set;~platz;1}
{if;{args};includes;show;
{embed;{buildembed;
  color:{get;~eColor;0};
  title:üèÜ Punkte√ºbersicht üèÜ;
  description:
{foreach;~user;{rolemembers;{get;~roleID}};{if;{get;_Wert{get;~user}};>;0;
{push;{get;~array};***{get;_Wert{get;~user}}*** ‚áæ {usernick;{get;~user}}}}}
{sort;{get;~array};descending}
{foreach;~value;{get;~array};
{if;{get;~platz};includes;1;:first_place: {shift;{get;~array}}{newline}{set;~platz;2};
{if;{get;~platz};includes;2;:second_place: {shift;{get;~array}}{newline}{set;~platz;3};
{if;{get;~platz};includes;3;:third_place: {shift;{get;~array}}{newline}{set;~platz;4}; 
{if;{get;~platz};includes;4;{newline}:four:  {shift;{get;~array}}{newline}{set;~platz;5};
{if;{get;~platz};includes;5;:five:  {shift;{get;~array}}{set;~platz;6}{newline;2};   
{shift;{get;~array}}{newline}}}}}}}
}}{return}}



{//; Setzt Punkte wieder auf 0}
{if;{args};includes;zero;
{set;_Wert{userid};0}{commit}
{embed;{buildembed;
  color:{get;~eColor;0};
  title:Hier ist deine aktuelle Punktezahl {usernick};
  description:{get;_Wert{userid}}{rollback}}}
  {modlog;Terranova Event;{userid};;Punktezahl auf 0 gesetzt.;{get;~eColor}}
  {return}}

{//; L√∂scht die Werte von Allen!}
{if;{args};includes;clear;
{set;~msg;{send;{channelid};
M√∂chtest du wirklich die Werte von allen Teilnehmern l√∂schen?}}
{//;Hinzuf√ºgen der Reaktionen}
{reactadd;{get;~msg};üëçüëé}
{//;Abwarten auf Reaktion}
{void;{waitreaction;{get;~msg};{userid};üëçüëé;{set;~reaction;{reaction}}}}
{//;Auslesen der Reaktionen}
{clean;{switch;{get;~reaction};
üëé;{embed;{buildembed;
  color:{get;~eColor;0};
  title:Befehl wurde abgebrochen.}}{return};
üëç;{foreach;~user;{rolemembers;{get;~roleID}};{if;{get;_Wert{get;~user}};>;0;
{set;_Wert{get;~user};0}{commit}}}
{embed;{buildembed;
  color:{get;~eColor;0};
  title:Die Werte von allen Teilnehmern wurden gel√∂scht.}}
  {modlog;Terranova Event;{userid};;Die Werte von allen Teilnehmern wurden gel√∂scht.;{get;~eColor}}
}}{return}}


{//; Zeigt die Hife}
{if;{args};includes;help;
{embed;{buildembed;
  color:{get;~eColor;0};
  title:üèÜ Terranova Event üèÜ;
  fields.name:Befehl;
  fields.value:  
1Ô∏è‚É£ {prefix}tev help
2Ô∏è‚É£ {prefix}tev
3Ô∏è‚É£ {prefix}tev <Punkte>
4Ô∏è‚É£ {prefix}tev zero
5Ô∏è‚É£ {prefix}tev show;
  fields.inline:true;
  
  fields.name:Erkl√§rung;
  fields.value:
1Ô∏è‚É£ Hilfe zum Terranova Event Befehl
2Ô∏è‚É£ Zeigt die eigenen Punkte
3Ô∏è‚É£ Z.b. `tev 15` Punkte die dazu gerechnet werden
4Ô∏è‚É£ Setzt Punkte auf 0 zur√ºck
5Ô∏è‚É£ Gibt ein Ergebnis bzw aktuellen Stand aus;
  fields.inline:true
}}
{return}}



{//; Check ob User RR9 ist}
{if;{userhasrole;{get;~rr9}};==;true;
{embed;{buildembed;color:{get;~eColor;0}
;title:‚ùå Terranova Event
;description:Du darfst leider nicht daran teilnehmen, da du RR9 bist!}}
{return}}
{//; Rechnet Punkte zum vorhandenen Wert dazu}
{set;_Wert{userid};{math;+;{get;_Wert{userid}};{args}}}{commit}
{embed;{buildembed;
  color:{get;~eColor;0};
  title:Hier ist deine aktuelle Punktezahl {usernick};
  description:{get;_Wert{userid}}{rollback}}
  {modlog;Terranova Event;{userid};;Punktezahl um {args} auf {get;_Wert{userid}}{rollback} gesetzt.;{get;~eColor}}
  {return}}
  